//
   Created by d032233 on 27.04.2016.
html
    head

        link(href='/bedelos/styles/bootstrap.min.css', rel='stylesheet')
        script(src='/bedelos/scripts/jquery-2.1.4.min.js')
        script(src='/bedelos/scripts/moment-with-locales.js')
        script(src='/bedelos/scripts/transition.js')
        script(src='/bedelos/scripts/collapse.js')
        script(src='/bedelos/scripts/js.cookie.js')
        script(src='/bedelos/scripts/jstree.js')
        script(src='/bedelos/scripts/bootstrap.min.js')
        script(src='/bedelos/scripts/bootstrap-datepicker.js')
        script(src='/bedelos/locales/bootstrap-datepicker.de.min.js')
        script(src='/bedelos/scripts/bootstrap-typeahead.js')
        link(href='/bedelos/styles/jstree.style.css', rel='stylesheet')
        link(href='/bedelos/styles/bootstrap-datepicker3.min.css', rel='stylesheet')
        title BDL Online Team Spielplan Selection

    body(style={"font-family": 'Calibri'})

        .container
            .row
                .col-xs-2
                    label(for='heim') Team
                .col-xs-3
                    .form-group
                        input.typeahead(id='heim', type='text', data-provide='typeahead')
        br
        br
        br
        br
        br
        br
        br
        br
        br
        br
        br
        br
        br
        br
        nbsp
        form(id='submit', action='', method='post')
    script(type='text/javascript').

        function redirect(url, method) {
            $('#submit').attr('action', url);
            $('#submit').attr('method', method);
            $('#submit').submit();
        };

        var $input = $('.typeahead');
        var aTeams = JSON.parse("#{sTeams}".replace(/&quot;/g,'"'));
        $input.typeahead({
            source: aTeams,
            autoSelect: true
        });

        $(document).keyup(function(e) {
            var heim = $('#heim').typeahead('getActive');
            if (e.keyCode == 13 && heim && heim.id) { // escape key maps to keycode `27`
                redirect("/bedelos/teamspielplan/team/" + heim.id, 'post');
            }
        });

