<!doctype html>
<html class="no-js">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Spielbericht - Ergebniseingabe</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/ergebnistabelle.css">
    <link rel="stylesheet" href="styles/Autocomplete.css">
    <script src="bower_components/jquery/jquery.js"></script>
    <script src="bower_components/modernizr/modernizr.js"></script>
    <script src="bower_components/autocomplete/Autocomplete.js"></script>
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css">
</head>
<body>

<div id="hiddenSummaryTableContainer" style="visibility:hidden; position:absolute; width:0px; height:0px"></div>

<div id="hiddenInputFieldContainer" style="visibility:hidden; position:absolute; width:0px; height:0px">
  <div id="inputsForSingleHome">
    <select id="name1" name="name1" style="width:150px" onchange="checkSelection();"></select>
    <a id="linkmore1" onclick="switchMore('more1', $('#linkmore1').text().indexOf('More') != -1)" />More +</a>
    <div class="spacer"></div>
    <div id="more1" class="more">
      <input id="sl1" name="sl1" type="text" pattern="\d*" size="3" placeholder="SL">
      <input id="hf1" name="hf1" type="text" pattern="\d*" size="3" placeholder="HF">
      <input id="i180er1" name="i180er1" type="text" pattern="\d*" size="3" placeholder="180er">
    </div>
  </div>
      
  <div id="inputsForSingleGuest">
    <select id="name2" name="name2" style="width:150px" onchange="checkSelection();"></select>
    <a id="linkmore2" onclick="switchMore('more2', $('#linkmore2').text().indexOf('More') != -1)" />More +</a>
    <div id="more2" class="more">
      <input id="sl2" name="sl2" type="text" pattern="\d*" size="3" placeholder="SL">
      <input id="hf2" name="hf2" type="text" pattern="\d*" size="3" placeholder="HF">
      <input id="i180er2" name="i180er2" type="text" pattern="\d*" size="3" placeholder="180er">
    </div>
  </div>

  <div id="inputsForDoubleHome">
    <select id="heimname1" name="heimname1" style="width:150px" onchange="checkSelection();"></select>
    <a id="linkdmore1" onclick="switchMore('dmore1', $('#linkdmore1').text().indexOf('More') != -1)" />More +</a>
    <div id="dmore1" class="more">
      <input id="dsl1" name="dsl1" type="text" pattern="\d*" size="3" placeholder="SL">
      <input id="dhf1" name="dhf1" type="text" pattern="\d*" size="3" placeholder="HF">
      <input id="di180er1" name="di180er1" type="text" pattern="\d*" size="3" placeholder="180er">
    </div>
    <div class="spacer"></div>
    <select id="heimname2" name="heimname2" style="width:150px" onchange="checkSelection();"></select>
    <a id="linkdmore2" onclick="switchMore('dmore2', $('#linkdmore2').text().indexOf('More') != -1)" />More +</a>
    <div id="dmore2" class="more">
      <input id="dhf2" name="dhf2" type="text" pattern="\d*" size="3" placeholder="HF">
      <input id="di180er2" name="di180er2" type="text" pattern="\d*" size="3" placeholder="180er">
    </div>
    <div class="spacer"></div>
  </div>  

  <div id="inputsForDoubleGuest">
    <select id="gastname1" name="gastname1" style="width:150px" onchange="checkSelection();"></select>
    <a id="linkdmore3" onclick="switchMore('dmore3', $('#linkdmore3').text().indexOf('More') != -1)" />More +</a>
    <div id="dmore3" class="more">
      <input id="dsl2" name="dsl2" type="text" pattern="\d*" size="3" placeholder="SL">
      <input id="dhf3" name="dhf3" type="text" pattern="\d*" size="3" placeholder="HF">
      <input id="di180er3" name="di180er3" type="text" pattern="\d*" size="3" placeholder="180er">
    </div>
    <div class="spacer"></div>
    <select id="gastname2" name="gastname2" style="width:150px" onchange="checkSelection();"></select>
    <a id="linkdmore4" onclick="switchMore('dmore4', $('#linkdmore4').text().indexOf('More') != -1)" />More +</a>
    <div id="dmore4" class="more">
      <input id="dhf4" name="dhf4" type="text" pattern="\d*" size="3" placeholder="HF">
      <input id="di180er4" name="di180er4" type="text" pattern="\d*" size="3" placeholder="180er">
    </div>
    <div class="spacer"></div>
  </div>  

</div>

<div class="container">

  <h3>BDL Online Spielberichtsbogen</h3>

  <div id="partie"></div>

  <div id="summaryTableContainer">
    <table id="summaryTable" class="ergebnistabelle">
       <tr class="gegnerNamen">
         <td colspan=3>HEIM:</td>
         <td id="heimFeldInTable">asdasda</td>
         <td>GAST:</td>
         <td colspan=4 id="gastFeldInTable">asdasd</td>
       </tr>
       <tr class="gegnerNamen">
          <th><div class="thRotated">SL</div></th>
          <th><div class="thRotated">HF</div></th>
          <th><div class="thRotated">180er</div></th>
          <th style="width:60%">Name</th>
          <th>&nbsp;</th>
          <th style="width:60%">Name</th>
          <th><div class="thRotated">180er</div></th>
          <th><div class="thRotated">HF</div></th>
          <th><div class="thRotated">SL</div></th>
       </tr>
    </table>
  </div>

  
    <form action="index2.html" method="get">
      <input id="heim" name="heim" type="hidden">
      <input id="gast" name="gast" type="hidden">
      <input id="spiel" name="spiel" type="hidden">
          <hr>
          <div id="spielHeadline"></div>
          <div id="spielerHeim"></div>
          <div id="ergSelection" style="visibility:hidden">
            Ergebnis Heim: 0 <input type="radio" name="erg1" value="0" onchange="checkSelection();" checked="true">
            1 <input type="radio" name="erg1" value="1" onchange="checkSelection();">
            2 <input type="radio" name="erg1" value="2" onchange="checkSelection();">
            3 <input type="radio" name="erg1" value="3" onchange="checkSelection();">
            <br>
            Ergebnis Gast: 0 <input type="radio" name="erg2" value="0" onchange="checkSelection();" checked="true">
            1 <input type="radio" name="erg2" value="1" onchange="checkSelection();">
            2 <input type="radio" name="erg2" value="2" onchange="checkSelection();">
            3 <input type="radio" name="erg2" value="3" onchange="checkSelection();">
          </div>
          <div class="spacer"></div>
          <div id="spielerGast"></div>
          <div class="spacer"></div>
          

          <input id="speichern" type="submit" name="speichern" value="Ergebnis sichern..." disabled="disabled" style="display:none">
    </form>
<br>
<br>
<form action="sendMail.php" method="post" enctype="multipart/form-data" onclick="fillHiddenFields();">
    <textarea id="ergebnisJSON" name="ergebnisJSON" style="display:none"></textarea>
    <textarea id="emailCSSStyles" name="emailCSSStyles" style="display:none"></textarea>
    <textarea id="emailSummaryTable" name="emailSummaryTable" style="display:none"></textarea>
    Foto des handschriftlichen Spielberichtes mit Unterschriften einf&uuml;gen:
    <br><input type="file" name="onlineSpielberichtBild" capture="camera" accept="image/*" id="takePictureField">
    <br><br>
    <input type="submit" name="submit" value="Absenden">
</form>

<hr>

    <footer>
      <p>&copy; <b><a href="mailto:marius.augenstein@gmail.com">Marius Augenstein (2015)</a></b> (<a href="http://bdl-online-spielplan.lima-city.de/impressum.html">Impressum</a>) <br>
       <a href="http://www.badischedartliga.de">Badische Dart Liga</a> | <a href="http://www.badischedartliga.de">BDL Online Spielbericht</a>
      </p>
    </footer>

<script data-main="scripts/main" src="bower_components/requirejs/require.js"></script>
<script src="scripts/async.localStorage.js"></script>
<script src="scripts/async.localStorage.examples.js"></script>
<script src="scripts/fullscreensnippet.js"></script>
<script type="text/javascript">

  function generateUID() {
      return ("0000" + (Math.random()*Math.pow(36,4) << 0).toString(36)).slice(-4)
  }
  
  function checkSelection() {
    var bEinzel = (document.getElementById("spiel").value[0] === 'e');
    var erg1 = parseInt(document.querySelector('input[name="erg1"]:checked').value);
    var erg2 = parseInt(document.querySelector('input[name="erg2"]:checked').value);
    if (bEinzel) {
      if (erg1===3 || erg2===3) {
        document.getElementById("speichern").disabled = (erg1===3 && erg2===3);
      } else {
        document.getElementById("speichern").disabled = true;
      }
    } else {
      if (erg1===3 || erg2===3) {
        var bNamesOk = checkNames();
        var bBothThree = (erg1===3 && erg2===3);
        document.getElementById("speichern").disabled = !(!bBothThree && bNamesOk);
      } else {
        document.getElementById("speichern").disabled = true;
      }
    }
  };

  function checkNames() {
    var sHeimName1 = document.getElementById("heimname1").value;
    var sHeimName2 = document.getElementById("heimname2").value;
    var sGastName1 = document.getElementById("gastname1").value;
    var sGastName2 = document.getElementById("gastname2").value;

    return (sHeimName1 != sHeimName2 && sGastName1 != sGastName2);
  }

  function walkDOM(node, func) {
    func(node);                     //What does this do?
    node = node.firstChild;
    while(node) {
      walkDOM(node,func);
      node = node.nextSibling;
    }
  };

  function fillHiddenFields() {
    removeBorders();
    $("#hiddenSummaryTableContainer").empty();
    $("#summaryTable").clone().appendTo("#hiddenSummaryTableContainer");
    
    walkDOM(document.getElementById("hiddenSummaryTableContainer"), function(oNode) {
      if (oNode && oNode.hasAttribute && oNode.hasAttribute("onclick")){
        oNode.removeAttribute("onclick");
      }
    });

    document.getElementById("emailSummaryTable").value = $("#hiddenSummaryTableContainer").html();
    document.getElementById("ergebnisJSON").value = JSON.stringify(ergebnisse);

    $.get("data/ergebnistabelle.css", function(oContent) {
      document.getElementById("emailCSSStyles").value = oContent;
    });
  };

  function getUrlParameter(sParam){
      var sReturn = "";
      var sPageURL = window.location.search.substring(1);
      var sURLVariables = sPageURL.split('&');
      for (var i = 0; i < sURLVariables.length; i++) {
          var sParameterName = sURLVariables[i].split('=');
          if (sParameterName[0] == sParam) {
            sReturn = sParameterName[1];
          }
      }
      return sReturn;
  };

  var heim = unescape(getUrlParameter("heim"));
  var gast = unescape(getUrlParameter("gast"));
  var newGame = unescape(getUrlParameter("neuesSpiel"));
  var spiel = getUrlParameter("spiel").replace(/\+/g,' ');
  var aVereine = [];
  
  var ergebnisse = (newGame==="true") ? undefined : JSON.parse(window.localStorage.getItem("ergebnisse"));

  if (ergebnisse) {
    readNewGameFromURL(ergebnisse, spiel);
    window.localStorage.setItem("ergebnisse", JSON.stringify(ergebnisse));
    printTable(ergebnisse);
  } else {
    $.getJSON("data/ergebnisse.json", function(ergebnisse) {
      ergebnisse.heim = heim;
      ergebnisse.gast = gast;

      readNewGameFromURL(ergebnisse, spiel);

      window.localStorage.setItem("ergebnisse", JSON.stringify(ergebnisse));

      printTable(ergebnisse);
    });
  }

  $.getJSON("data/vereine.json", function(oVereine) {
    var heimSelectS = $('#name1');
    var heimSelectD1 = $('#heimname1');
    var heimSelectD2 = $('#heimname2');
    for (var i = 0; i<oVereine[heim].mitglieder.length; i++) {
       var spieler = atob(oVereine[heim].mitglieder[i].vorname) + " " + atob(oVereine[heim].mitglieder[i].name);
       heimSelectS.append($('<option></option>', {
          value: btoa(spieler),
          text: spieler
       }));
       heimSelectD1.append($('<option></option>', {
          value: btoa(spieler),
          text: spieler
       }));
       heimSelectD2.append($('<option></option>', {
          value: btoa(spieler),
          text: spieler
       }));
    }

    var gastSelectS = $('#name2');
    var gastSelectD1 = $('#gastname1');
    var gastSelectD2 = $('#gastname2');
    for (var i = 0; i<oVereine[gast].mitglieder.length; i++) {
       var spieler = atob(oVereine[gast].mitglieder[i].vorname) + " " + atob(oVereine[gast].mitglieder[i].name);
       gastSelectS.append($('<option></option>', {
          value: btoa(spieler),
          text: spieler
       }));
       gastSelectD1.append($('<option></option>', {
          value: btoa(spieler),
          text: spieler
       }));
       gastSelectD2.append($('<option></option>', {
          value: btoa(spieler),
          text: spieler
       }));
    }
  });

  function printTable(ergebnisse) {
    var team1Legs = 0;
    var team1Sets = 0;
    var team2Legs = 0;
    var team2Sets = 0;
    var lineCounter = 1;
    for (var erg in ergebnisse) {
      if (ergebnisse[erg].spieler1 && ergebnisse[erg].spieler2) {
        var classSpec = (lineCounter % 2 === 0) ? "einzelblockEven" : "einzelblockOdd";
        var uid = generateUID();
        var line = "<tr id='" + uid + "' class='"+classSpec+"' onclick='enableFormForSingles(true, " + lineCounter + ", \"" + uid + "\")'>"+
                      "<td class='slhf180block'>" + p(ergebnisse[erg].spieler1.shortlegs) + "</td>\n"+
                      "<td class='slhf180block'>" + p(ergebnisse[erg].spieler1.highfinishes) + "</td>\n"+
                      "<td class='slhf180block'>" + p(ergebnisse[erg].spieler1.i180er) + "</td>\n"+
                      "<td>" + ergebnisse[erg].spieler1.name + "</td>\n"+
                      "<td class='ergebnisBlock'>" + ergebnisse[erg].spieler1.legs + " : " + ergebnisse[erg].spieler2.legs + "</td>\n"+
                      "<td>" + ergebnisse[erg].spieler2.name + "</td>\n"+
                      "<td class='slhf180block'>" + p(ergebnisse[erg].spieler2.i180er) + "</td>\n"+
                      "<td class='slhf180block'>" + p(ergebnisse[erg].spieler2.highfinishes) + "</td>\n"+
                      "<td class='slhf180block'>" + p(ergebnisse[erg].spieler2.shortlegs) + "</td>\n"+
                   "</tr>";
        $('#summaryTable tr:last').after(line);
        lineCounter++;
        team1Legs += parseInt(ergebnisse[erg].spieler1.legs);
        team2Legs += parseInt(ergebnisse[erg].spieler2.legs);
        if (ergebnisse[erg].spieler1.legs>ergebnisse[erg].spieler2.legs) {
          team1Sets++;
        } else if (ergebnisse[erg].spieler1.legs<ergebnisse[erg].spieler2.legs) {
          team2Sets++;
        }
      } else if (ergebnisse[erg].paar1 && ergebnisse[erg].paar2) {
        var classSpec = (lineCounter % 2 === 0) ? "doppelblockEven" : "doppelblockOdd";
        var uid = generateUID();

        var line = "<tr id='" + uid + "_1' class='"+classSpec+"' onclick='enableFormForSingles(false, " + lineCounter + ", \"" + uid + "_1\")'>"+
                      "<td rowspan='2' class='slhf180block'>" + p(ergebnisse[erg].paar1.shortlegs) + "</td>\n"+
                      "<td class='slhf180block'>" + p(ergebnisse[erg].paar1.spieler1.highfinishes) + "</td>\n"+
                      "<td class='slhf180block'>" + p(ergebnisse[erg].paar1.spieler1.i180er) + "</td>\n"+
                      "<td>" + ergebnisse[erg].paar1.spieler1.name + "</td>\n"+
                      "<td rowspan='2' class='ergebnisBlock'>" + ergebnisse[erg].paar1.legs + " : " + ergebnisse[erg].paar2.legs + "</td>\n"+
                      "<td>" + ergebnisse[erg].paar2.spieler1.name + "</td>\n"+
                      "<td class='slhf180block'>" + p(ergebnisse[erg].paar2.spieler1.i180er) + "</td>\n"+
                      "<td class='slhf180block'>" + p(ergebnisse[erg].paar2.spieler1.highfinishes) + "</td>\n"+
                      "<td rowspan='2' class='slhf180block'>" + p(ergebnisse[erg].paar2.shortlegs) + "</td>\n"+
                    "</tr>\n"+
                    "<tr id='" + uid + "_2' class='"+classSpec+"' onclick='enableFormForSingles(false, " + lineCounter + ", \"" + uid + "_2\")'>\n"+
                      "<td class='slhf180block'>" + p(ergebnisse[erg].paar1.spieler2.highfinishes) + "</td>\n"+
                      "<td class='slhf180block'>" + p(ergebnisse[erg].paar1.spieler2.i180er) + "</td>\n"+
                      "<td>" + ergebnisse[erg].paar1.spieler2.name + "</td>\n"+
                      "<td>" + ergebnisse[erg].paar2.spieler2.name + "</td>\n"+
                      "<td class='slhf180block'>" + p(ergebnisse[erg].paar2.spieler2.i180er) + "</td>\n"+
                      "<td class='slhf180block'>" + p(ergebnisse[erg].paar2.spieler2.highfinishes) + "</td>\n"+
                    "</tr>";
        $('#summaryTable tr:last').after(line);
        lineCounter++;
        team1Legs += parseInt(ergebnisse[erg].paar1.legs);
        team2Legs += parseInt(ergebnisse[erg].paar2.legs);
        if (ergebnisse[erg].paar1.legs>ergebnisse[erg].paar2.legs) {
          team1Sets++;
        } else if (ergebnisse[erg].paar1.legs<ergebnisse[erg].paar2.legs) {
          team2Sets++;
        }
      }
    }
    var line = "<tr class='summaryBlock'>"+
                  "<td colspan=3 rowspan=2>&nbsp;</td>\n"+
                  "<td rowspan=2>Ergebnis:</td>\n"+
                  "<td>" + team1Legs + " : " + team2Legs + "</td>\n"+
                  "<td>Legs</td>\n"+
                  "<td colspan=3>&nbsp;</td>\n"+
               "</tr>"+
               "<tr class='summaryBlock'>"+
                  "<td>" + team1Sets + " : " + team2Sets + "</td>\n"+
                  "<td>Sets</td>\n"+
                  "<td colspan=3>&nbsp;</td>\n"+
               "</tr>";
    $('#summaryTable tr:last').after(line);
  };

  function p(sErg) {
    return (sErg == 0) ? "&nbsp;" : sErg;
  };

  function readNewGameFromURL(ergebnisse, spiel) {
    if (!spiel) {
      return;
    }

    if (ergebnisse[spiel].spieler1) {
      ergebnisse[spiel].spieler1 = { 
        "name" : atob(unescape(getUrlParameter("name1"))), 
        "legs" : getUrlParameter("erg1") || 0, 
        "shortlegs" : getUrlParameter("sl1") || 0, 
        "highfinishes" : getUrlParameter("hf1") || 0, 
        "i180er" : getUrlParameter("i180er1") || 0 
      };
    };

    if (ergebnisse[spiel].spieler2) {
      ergebnisse[spiel].spieler2 = { 
        "name" : atob(unescape(getUrlParameter("name2"))), 
        "legs" : getUrlParameter("erg2") || 0, 
        "shortlegs" : getUrlParameter("sl2") || 0, 
        "highfinishes" : getUrlParameter("hf2") || 0, 
        "i180er" : getUrlParameter("i180er2") || 0 
      };
    };
    
    if (ergebnisse[spiel].paar1) {
      ergebnisse[spiel].paar1 = { 
        "legs" : getUrlParameter("erg1") || 0,
        "shortlegs" : getUrlParameter("dsl1") || 0,
        "spieler1" : {
          "name" : atob(unescape(getUrlParameter("heimname1"))), 
          "highfinishes" : getUrlParameter("dhf1") || 0,
          "i180er" : getUrlParameter("di180er1") || 0
        },
        "spieler2" : {
          "name" : atob(unescape(getUrlParameter("heimname2"))), 
          "highfinishes" : getUrlParameter("dhf2") || 0,
          "i180er" : getUrlParameter("di180er2") || 0
        }
      };
    };

    if (ergebnisse[spiel].paar2) {
      ergebnisse[spiel].paar2 = { 
        "legs" : getUrlParameter("erg2") || 0,
        "shortlegs" : getUrlParameter("dsl2") || 0,
        "spieler1" : {
          "name" : atob(unescape(getUrlParameter("gastname1"))), 
          "highfinishes" : getUrlParameter("dhf3") || 0,
          "i180er" : getUrlParameter("di180er3") || 0
        },
        "spieler2" : {
          "name" : atob(unescape(getUrlParameter("gastname2"))), 
          "highfinishes" : getUrlParameter("dhf4") || 0,
          "i180er" : getUrlParameter("di180er4") || 0
        }
      };
    };
  };

  function removeBorders() {
    $(".singleRowSelected").removeClass("singleRowSelected");
    $(".doubleRowSelectedTop").removeClass("doubleRowSelectedTop");
    $(".doubleRowSelectedBottom").removeClass("doubleRowSelectedBottom");
  };

  function enableFormForSingles(bSingles, lineCounter, uid) {
    removeBorders();

    if (uid.length>4) {
      var tmpId = uid.substring(0,4);
      $("#" + tmpId + "_1").addClass("doubleRowSelectedTop");
      $("#" + tmpId + "_2").addClass("doubleRowSelectedBottom");
    } else {
      $("#" + uid).addClass("singleRowSelected");
    }

    switch (lineCounter) {
        case 1:
            document.getElementById('spielHeadline').innerHTML = "<h4>Block 1 (Einzel) - Spiel 1</h4>";
            document.getElementById('spiel').value = "e1b1";
            break;
        case 2:
            document.getElementById('spielHeadline').innerHTML = "<h4>Block 1 (Einzel) - Spiel 2</h4>";
            document.getElementById('spiel').value = "e2b1";
            break;
        case 3:
            document.getElementById('spielHeadline').innerHTML = "<h4>Block 1 (Einzel) - Spiel 3</h4>";
            document.getElementById('spiel').value = "e3b1";
            break;
        case 4:
            document.getElementById('spielHeadline').innerHTML = "<h4>Block 1 (Einzel) - Spiel 4</h4>";
            document.getElementById('spiel').value = "e4b1";
            break;
        case 5:
            document.getElementById('spielHeadline').innerHTML = "<h4>Block 2 (Doppel) - Spiel 1</h4>";
            document.getElementById('spiel').value = "d1b2";
            break;
        case 6:
            document.getElementById('spielHeadline').innerHTML = "<h4>Block 2 (Doppel) - Spiel 2</h4>";
            document.getElementById('spiel').value = "d2b2";
            break;
        case 7:
            document.getElementById('spielHeadline').innerHTML = "<h4>Block 3 (Einzel) - Spiel 1</h4>";
            document.getElementById('spiel').value = "e1b3";
            break;
        case 8:
            document.getElementById('spielHeadline').innerHTML = "<h4>Block 3 (Einzel) - Spiel 2</h4>";
            document.getElementById('spiel').value = "e2b3";
            break;
        case 9:
            document.getElementById('spielHeadline').innerHTML = "<h4>Block 3 (Einzel) - Spiel 3</h4>";
            document.getElementById('spiel').value = "e3b3";
            break;
        case 10:
            document.getElementById('spielHeadline').innerHTML = "<h4>Block 3 (Einzel) - Spiel 4</h4>";
            document.getElementById('spiel').value = "e4b3";
            break;
        case 11:
            document.getElementById('spielHeadline').innerHTML = "<h4>Block 4 (Doppel) - Spiel 1</h4>";
            document.getElementById('spiel').value = "d1b4";
            break;
        case 12:
            document.getElementById('spielHeadline').innerHTML = "<h4>Block 4 (Doppel) - Spiel 2</h4>";
            document.getElementById('spiel').value = "d2b4";
            break;
    }
    document.getElementById("speichern").style.display = "inherit";
    $("#ergSelection").css("visibility","visible"); 
    $("#spielerHeim > #inputsForSingleHome").appendTo("#hiddenInputFieldContainer");
    $("#spielerHeim > #inputsForDoubleHome").appendTo("#hiddenInputFieldContainer");
    $("#spielerGast > #inputsForSingleGuest").appendTo("#hiddenInputFieldContainer");
    $("#spielerGast > #inputsForDoubleGuest").appendTo("#hiddenInputFieldContainer");
    
    if (bSingles) {
      $("#hiddenInputFieldContainer > #inputsForSingleHome").appendTo("#spielerHeim");  
      $("#hiddenInputFieldContainer > #inputsForSingleGuest").appendTo("#spielerGast");  
    } else {
      $("#hiddenInputFieldContainer > #inputsForDoubleHome").appendTo("#spielerHeim");  
      $("#hiddenInputFieldContainer > #inputsForDoubleGuest").appendTo("#spielerGast");  
    }
  };

  function switchMore(sId, bShow, duration) {
    if (bShow) {
      if (duration == 0) {
        jQuery("#" + sId).show();
      } else {
        jQuery("#" + sId).show(200);
      }
      jQuery("#link" + sId).text("Less -");
    } else {
      if (duration == 0) {
        jQuery("#" + sId).hide();
      } else {
        jQuery("#" + sId).hide(200);
      }
      jQuery("#link" + sId).text("More +");
    }
  };

  switchMore("more1", false, 0);
  switchMore("more2", false, 0);
  switchMore("dmore1", false, 0);
  switchMore("dmore2", false, 0);
  switchMore("dmore3", false, 0);
  switchMore("dmore4", false, 0);
  document.getElementById("heimFeldInTable").innerHTML = atob(heim);
  document.getElementById("gastFeldInTable").innerHTML = atob(gast);
  $("#heim").val(heim);
  $("#gast").val(gast);

</script>

</body>
</html>
