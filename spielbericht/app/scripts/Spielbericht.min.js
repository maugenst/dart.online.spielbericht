function updateStatistic(e){var a=e.statistik||[];a.sort(function(e,a){return a.score-e.score}),printScoresTable(a)}function setUpSelections(){for(var e=[],a=[],t=0;t<vereine[ergebnisse.heim].mitglieder.length;t++)e.push(atob(vereine[ergebnisse.heim].mitglieder[t].name)+", "+atob(vereine[ergebnisse.heim].mitglieder[t].vorname));e.sort(),$("#name1").empty(),$("#heimname1").empty(),$("#heimname2").empty();for(var t=0;t<e.length;t++){var n=e[t];$("#name1").append($("<option/>",{value:btoa(n),text:n})),$("#heimname1").append($("<option/>",{value:btoa(n),text:n})),$("#heimname2").append($("<option/>",{value:btoa(n),text:n}))}for(var t=0;t<vereine[ergebnisse.gast].mitglieder.length;t++)a.push(atob(vereine[ergebnisse.gast].mitglieder[t].name)+", "+atob(vereine[ergebnisse.gast].mitglieder[t].vorname));a.sort(),$("#name2").empty(),$("#gastname1").empty(),$("#gastname2").empty();for(var t=0;t<a.length;t++){var n=a[t];$("#name2").append($("<option/>",{value:btoa(n),text:n})),$("#gastname1").append($("<option/>",{value:btoa(n),text:n})),$("#gastname2").append($("<option/>",{value:btoa(n),text:n}))}$(".selectpicker").selectpicker("refresh")}function printScoresTable(e){var a=findHighestScore(e);emptyTable("scoresTable");for(var t=0;t<e.length;t++){var n="score",r=e[t].score;switch(t){case 0:n="scoreGold";break;case 1:n="scoreSilver";break;case 2:n="scoreBronze"}var i="<tr><td class='nameCell'>"+e[t].name+"</td>\n<td><div class='"+n+"' style='width:"+calculateWidth(a,r)+"%'>&nbsp;</div></td>\n<td class='scoreCell'>"+r+"</td>\n</tr>";$("#scoresTable > tbody tr:last").after(i)}}function findHighestScore(e){for(var a=0,t=e.length-1;t>=0;t--)e[t].score>a&&(a=e[t].score);return a}function calculateWidth(e,a){return 100*a/e}function prepareStatistic(e){e.statistik=[];for(var a=Object.keys(e),t=0;t<a.length;t++){var n=a[t];if(e[n].spieler1&&""!=e[n].spieler1.name&&""!=e[n].spieler2.name){var r=calcScoreForPlayer(!0,e[n].spieler1.legs,e[n].spieler1.i180er,e[n].spieler1.shortlegs,e[n].spieler1.highfinishes);console.log("EINZEL",e[n].spieler1.name,r),addScoreForPlayer(e,e[n].spieler1.name,r);var r=calcScoreForPlayer(!0,e[n].spieler2.legs,e[n].spieler2.i180er,e[n].spieler2.shortlegs,e[n].spieler2.highfinishes);console.log("EINZEL",e[n].spieler2.name,r),addScoreForPlayer(e,e[n].spieler2.name,r)}if(e[n].paar1&&""!=e[n].paar1.spieler1.name&&""!=e[n].paar1.spieler2.name){var r=calcScoreForPlayer(!1,e[n].paar1.legs,e[n].paar1.spieler1.i180er,e[n].paar1.shortlegs,e[n].paar1.spieler1.highfinishes);console.log("DOPPEL",e[n].paar1.spieler1.name,r),addScoreForPlayer(e,e[n].paar1.spieler1.name,r);var r=calcScoreForPlayer(!1,e[n].paar1.legs,e[n].paar1.spieler2.i180er,e[n].paar1.shortlegs,e[n].paar1.spieler2.highfinishes);console.log("DOPPEL",e[n].paar1.spieler2.name,r),addScoreForPlayer(e,e[n].paar1.spieler2.name,r)}if(e[n].paar2&&""!=e[n].paar2.spieler1.name&&""!=e[n].paar2.spieler2.name){var r=calcScoreForPlayer(!1,e[n].paar2.legs,e[n].paar2.spieler1.i180er,e[n].paar2.shortlegs,e[n].paar2.spieler1.highfinishes);console.log("DOPPEL",e[n].paar2.spieler1.name,r),addScoreForPlayer(e,e[n].paar2.spieler1.name,r);var r=calcScoreForPlayer(!1,e[n].paar2.legs,e[n].paar2.spieler2.i180er,e[n].paar2.shortlegs,e[n].paar2.spieler2.highfinishes);console.log("DOPPEL",e[n].paar2.spieler2.name,r),addScoreForPlayer(e,e[n].paar2.spieler2.name,r)}}}function addScoreForPlayer(e,a,t){for(var n=0;n<e.statistik.length;n++)if(e.statistik[n].name==a)return void(e.statistik[n].score+=t);e.statistik.push({name:a,score:t})}function calcScoreForPlayer(e,a,t,n,r){var i=0,l=parseInt(a),s=parseInt(t),d=parseInt(n),o=parseInt(r),p=.3/69;return i+=e?0!=d?d*-.16+3.44:0:0!=d?.5*(d*-.16+3.44):0,i+=l,i+=3===l?2:0,i+=0!=s?.9*s:0,i+=0!=o?o*p:0}function generateUID(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}function _getSliderValue(){var e=mySlider.getValue(),a=0,t=0;switch(e){case 0:a=3,t=0;break;case 1:a=3,t=1;break;case 2:a=3,t=2;break;case 3:a=2,t=3;break;case 4:a=1,t=3;break;case 5:a=0,t=3}return{erg1:a,erg2:t}}function checkSelection(){var e="e"===document.getElementById("spiel").value[0],a=_getSliderValue();e||(document.getElementById("speichern").disabled=!checkNames()),$("#ergDisplay").text(a.erg1+":"+a.erg2)}function checkNames(){var e=document.getElementById("heimname1").value,a=document.getElementById("heimname2").value,t=document.getElementById("gastname1").value,n=document.getElementById("gastname2").value;return e!=a&&t!=n}function walkDOM(e,a){for(a(e),e=e.firstChild;e;)walkDOM(e,a),e=e.nextSibling}function fillHiddenFields(){removeBorders(),$("#hiddenSummaryTableContainer").empty(),$("#summaryTable").clone().appendTo("#hiddenSummaryTableContainer"),walkDOM(document.getElementById("hiddenSummaryTableContainer"),function(e){e&&e.hasAttribute&&e.hasAttribute("onclick")&&e.removeAttribute("onclick")}),document.getElementById("emailSummaryTable").value=$("#hiddenSummaryTableContainer").html(),document.getElementById("ergebnisJSON").value=JSON.stringify(ergebnisse),document.getElementById("tcHeim").value=document.getElementById("emailHeim").value,document.getElementById("tcGast").value=document.getElementById("emailGast").value,$.get("styles/ergebnistabelle.css",function(e){document.getElementById("emailCSSStyles").value=e});for(var e=document.cookie.split(";"),a=e.length-1;a>=0;a--)if(e[a]&&""!=e[a]&&-1!=e[a].indexOf("=")){var t=e[a].trim().split("=");0===t[0].indexOf("email")&&(document.getElementById(t[0].trim()).value=t[1].trim())}}function getUrlParameter(e){for(var a="",t=window.location.search.substring(1),n=t.split("&"),r=0;r<n.length;r++){var i=n[r].split("=");i[0]==e&&(a=i[1])}return a}function emptyTable(e){$("#"+e+" > tbody").html(""),$("#"+e+" > tbody").html("<tr></tr>")}function printTable(e){var a=1;for(var t in e)if(e[t].spieler1&&e[t].spieler2){var n=a%2===0?"einzelblockEven":"einzelblockOdd",r=generateUID(),i="<tr id='"+r+"' class='"+n+"' onclick='enableFormForSingles(true, "+a+', "'+r+"\")'><td id='"+t+"_spieler1_shortlegs' class='slhf180block'>"+p(e[t].spieler1.shortlegs)+"</td>\n<td id='"+t+"_spieler1_highfinishes' class='slhf180block'>"+p(e[t].spieler1.highfinishes)+"</td>\n<td id='"+t+"_spieler1_i180er' class='slhf180block'>"+p(e[t].spieler1.i180er)+"</td>\n<td id='"+t+"_spieler1_name'>"+e[t].spieler1.name+"</td>\n<td class='ergebnisBlock'><font id='"+t+"_spieler1_legs'>"+e[t].spieler1.legs+"</font>\n : \n<font id='"+t+"_spieler2_legs'>"+e[t].spieler2.legs+"</font>\n</td>\n<td id='"+t+"_spieler2_name'>"+e[t].spieler2.name+"</td>\n<td id='"+t+"_spieler2_i180er' class='slhf180block'>"+p(e[t].spieler2.i180er)+"</td>\n<td id='"+t+"_spieler2_highfinishes' class='slhf180block'>"+p(e[t].spieler2.highfinishes)+"</td>\n<td id='"+t+"_spieler2_shortlegs' class='slhf180block'>"+p(e[t].spieler2.shortlegs)+"</td>\n</tr>";$("#summaryTable > tbody tr:last").after(i),a++}else if(e[t].paar1&&e[t].paar2){var n=a%2===0?"doppelblockEven":"doppelblockOdd",r=generateUID(),i="<tr id='"+r+"_1' class='"+n+"' onclick='enableFormForSingles(false, "+a+', "'+r+"_1\")'><td id='"+t+"_paar1_shortlegs' rowspan='2' class='slhf180block'>"+p(e[t].paar1.shortlegs)+"</td>\n<td id='"+t+"_paar1_spieler1_highfinishes' class='slhf180block'>"+p(e[t].paar1.spieler1.highfinishes)+"</td>\n<td id='"+t+"_paar1_spieler1_i180er' class='slhf180block'>"+p(e[t].paar1.spieler1.i180er)+"</td>\n<td id='"+t+"_paar1_spieler1_name'>"+e[t].paar1.spieler1.name+"</td>\n<td rowspan='2' class='ergebnisBlock'><font id='"+t+"_paar1_legs'>"+e[t].paar1.legs+"</font>\n : \n<font id='"+t+"_paar2_legs'>"+e[t].paar2.legs+"</font>\n</td>\n<td id='"+t+"_paar2_spieler1_name'>"+e[t].paar2.spieler1.name+"</td>\n<td id='"+t+"_paar2_spieler1_i180er' class='slhf180block'>"+p(e[t].paar2.spieler1.i180er)+"</td>\n<td id='"+t+"_paar2_spieler1_highfinishes' class='slhf180block'>"+p(e[t].paar2.spieler1.highfinishes)+"</td>\n<td id='"+t+"_paar2_shortlegs' rowspan='2' class='slhf180block'>"+p(e[t].paar2.shortlegs)+"</td>\n</tr>\n<tr id='"+r+"_2' class='"+n+"' onclick='enableFormForSingles(false, "+a+', "'+r+"_2\")'>\n<td id='"+t+"_paar1_spieler2_highfinishes' class='slhf180block'>"+p(e[t].paar1.spieler2.highfinishes)+"</td>\n<td id='"+t+"_paar1_spieler2_i180er' class='slhf180block'>"+p(e[t].paar1.spieler2.i180er)+"</td>\n<td id='"+t+"_paar1_spieler2_name'>"+e[t].paar1.spieler2.name+"</td>\n<td id='"+t+"_paar2_spieler2_name'>"+e[t].paar2.spieler2.name+"</td>\n<td id='"+t+"_paar2_spieler2_i180er' class='slhf180block'>"+p(e[t].paar2.spieler2.i180er)+"</td>\n<td id='"+t+"_paar2_spieler2_highfinishes' class='slhf180block'>"+p(e[t].paar2.spieler2.highfinishes)+"</td>\n</tr>";$("#summaryTable > tbody tr:last").after(i),a++}var i="<tr class='summaryBlock'><td colspan=3 rowspan=2>&nbsp;</td>\n<td rowspan=2>Ergebnis:</td>\n<td nowrap><font id='team1Legs'>0</font>\n : \n<font id='team2Legs'>0</font>\n</td>\n<td> - Legs</td>\n<td colspan=3>&nbsp;</td>\n</tr><tr class='summaryBlock'><td nowrap><font id='team1Sets'>0</font>\n : \n<font id='team2Sets'>0</font>\n</td>\n<td> - Sets</td>\n<td colspan=3>&nbsp;</td>\n</tr>";$("#summaryTable > tbody tr:last").after(i),i="<tr><td colspan=9><div class='bold'>Spielername (N) = Nachgemeldeter Spieler</div></td></tr>",$("#summaryTable > tbody tr:last").after(i)}function p(e){return 0==e?"&nbsp;":e}function internalStore(){var e=JSON.parse(window.localStorage.getItem("ergebnisse")),a=$("#spiel").val(),t=_getSliderValue();if(0==a.indexOf("e")){var n=unescape(atob(unescape($("#name1").val()))),r=unescape(atob(unescape($("#name2").val())));e[a].spieler1={name:n,legs:t.erg1,shortlegs:$("#sl1").val()||0,highfinishes:$("#hf1").val()||0,i180er:$("#i180er1").val()||0},e[a].spieler2={name:r,legs:t.erg2,shortlegs:$("#sl2").val()||0,highfinishes:$("#hf2").val()||0,i180er:$("#i180er2").val()||0},document.getElementById(a+"_spieler1_name").innerHTML=p(e[a].spieler1.name),document.getElementById(a+"_spieler1_legs").innerHTML=e[a].spieler1.legs,document.getElementById(a+"_spieler1_shortlegs").innerHTML=p(e[a].spieler1.shortlegs),document.getElementById(a+"_spieler1_highfinishes").innerHTML=p(e[a].spieler1.highfinishes),document.getElementById(a+"_spieler1_i180er").innerHTML=p(e[a].spieler1.i180er),document.getElementById(a+"_spieler2_name").innerHTML=p(e[a].spieler2.name),document.getElementById(a+"_spieler2_legs").innerHTML=e[a].spieler2.legs,document.getElementById(a+"_spieler2_shortlegs").innerHTML=p(e[a].spieler2.shortlegs),document.getElementById(a+"_spieler2_highfinishes").innerHTML=p(e[a].spieler2.highfinishes),document.getElementById(a+"_spieler2_i180er").innerHTML=p(e[a].spieler2.i180er)}else{var i=unescape(atob(unescape($("#heimname1").val()))),l=unescape(atob(unescape($("#heimname2").val()))),s=unescape(atob(unescape($("#gastname1").val()))),d=unescape(atob(unescape($("#gastname2").val())));e[a].paar1={legs:t.erg1,shortlegs:$("#dsl1").val()||0,spieler1:{name:i,highfinishes:$("#dhf1").val()||0,i180er:$("#di180er1").val()||0},spieler2:{name:l,highfinishes:$("#dhf2").val()||0,i180er:$("#di180er2").val()||0}},e[a].paar2={legs:t.erg2,shortlegs:$("#dsl2").val()||0,spieler1:{name:s,highfinishes:$("#dhf3").val()||0,i180er:$("#di180er3").val()||0},spieler2:{name:d,highfinishes:$("#dhf4").val()||0,i180er:$("#di180er4").val()||0}},document.getElementById(a+"_paar1_legs").innerHTML=e[a].paar1.legs,document.getElementById(a+"_paar1_shortlegs").innerHTML=p(e[a].paar1.shortlegs),document.getElementById(a+"_paar1_spieler1_name").innerHTML=p(e[a].paar1.spieler1.name),document.getElementById(a+"_paar1_spieler1_highfinishes").innerHTML=p(e[a].paar1.spieler1.highfinishes),document.getElementById(a+"_paar1_spieler1_i180er").innerHTML=p(e[a].paar1.spieler1.i180er),document.getElementById(a+"_paar1_spieler2_name").innerHTML=p(e[a].paar1.spieler2.name),document.getElementById(a+"_paar1_spieler2_highfinishes").innerHTML=p(e[a].paar1.spieler2.highfinishes),document.getElementById(a+"_paar1_spieler2_i180er").innerHTML=p(e[a].paar1.spieler2.i180er),document.getElementById(a+"_paar2_legs").innerHTML=e[a].paar2.legs,document.getElementById(a+"_paar2_shortlegs").innerHTML=p(e[a].paar2.shortlegs),document.getElementById(a+"_paar2_spieler1_name").innerHTML=p(e[a].paar2.spieler1.name),document.getElementById(a+"_paar2_spieler1_highfinishes").innerHTML=p(e[a].paar2.spieler1.highfinishes),document.getElementById(a+"_paar2_spieler1_i180er").innerHTML=p(e[a].paar2.spieler1.i180er),document.getElementById(a+"_paar2_spieler2_name").innerHTML=p(e[a].paar2.spieler2.name),document.getElementById(a+"_paar2_spieler2_highfinishes").innerHTML=p(e[a].paar2.spieler2.highfinishes),document.getElementById(a+"_paar2_spieler2_i180er").innerHTML=p(e[a].paar2.spieler2.i180er)}for(var o=Object.keys(e),m=0,c=0,g=0,h=0,u=0;u<o.length;u++){var a=o[u];0==a.indexOf("e")?(m+=parseInt(e[a].spieler1.legs),c+=parseInt(e[a].spieler2.legs),e[a].spieler1.legs>e[a].spieler2.legs?g++:e[a].spieler1.legs<e[a].spieler2.legs&&h++):0==a.indexOf("d")&&(m+=parseInt(e[a].paar1.legs),c+=parseInt(e[a].paar2.legs),e[a].paar1.legs>e[a].paar2.legs?g++:e[a].paar1.legs<e[a].paar2.legs&&h++)}document.getElementById("team1Legs").innerHTML=m,document.getElementById("team2Legs").innerHTML=c,document.getElementById("team1Sets").innerHTML=g,document.getElementById("team2Sets").innerHTML=h,prepareStatistic(e),updateStatistic(e),window.localStorage.setItem("ergebnisse",JSON.stringify(e)),$("#playerForm")[0].reset(),mySlider.setValue(0),$("#ergDisplay").text("3:0"),$("#inputFormDialog").modal("hide")}function removeBorders(){$(".singleRowSelected").removeClass("singleRowSelected"),$(".doubleRowSelectedTop").removeClass("doubleRowSelectedTop"),$(".doubleRowSelectedBottom").removeClass("doubleRowSelectedBottom")}function enableFormForSingles(e,a,t){if(removeBorders(),t.length>4){var n=t.substring(0,4);$("#"+n+"_1").addClass("doubleRowSelectedTop"),$("#"+n+"_2").addClass("doubleRowSelectedBottom")}else $("#"+t).addClass("singleRowSelected");var r=JSON.parse(window.localStorage.getItem("ergebnisse")),i={};switch(a){case 1:document.getElementById("spielHeadline").innerHTML="<h4>Block 1 (Einzel) - Spiel 1</h4>",document.getElementById("spiel").value="e1b1",i=getStoredNames(1,r);break;case 2:document.getElementById("spielHeadline").innerHTML="<h4>Block 1 (Einzel) - Spiel 2</h4>",document.getElementById("spiel").value="e2b1",i=getStoredNames(1,r);break;case 3:document.getElementById("spielHeadline").innerHTML="<h4>Block 1 (Einzel) - Spiel 3</h4>",document.getElementById("spiel").value="e3b1",i=getStoredNames(1,r);break;case 4:document.getElementById("spielHeadline").innerHTML="<h4>Block 1 (Einzel) - Spiel 4</h4>",document.getElementById("spiel").value="e4b1",i=getStoredNames(1,r);break;case 5:document.getElementById("spielHeadline").innerHTML="<h4>Block 2 (Doppel) - Spiel 1</h4>",document.getElementById("spiel").value="d1b2",i=getStoredNames(2,r);break;case 6:document.getElementById("spielHeadline").innerHTML="<h4>Block 2 (Doppel) - Spiel 2</h4>",document.getElementById("spiel").value="d2b2",i=getStoredNames(2,r);break;case 7:document.getElementById("spielHeadline").innerHTML="<h4>Block 3 (Einzel) - Spiel 1</h4>",document.getElementById("spiel").value="e1b3",i=getStoredNames(3,r);break;case 8:document.getElementById("spielHeadline").innerHTML="<h4>Block 3 (Einzel) - Spiel 2</h4>",document.getElementById("spiel").value="e2b3",i=getStoredNames(3,r);break;case 9:document.getElementById("spielHeadline").innerHTML="<h4>Block 3 (Einzel) - Spiel 3</h4>",document.getElementById("spiel").value="e3b3",i=getStoredNames(3,r);break;case 10:document.getElementById("spielHeadline").innerHTML="<h4>Block 3 (Einzel) - Spiel 4</h4>",document.getElementById("spiel").value="e4b3",i=getStoredNames(3,r);break;case 11:document.getElementById("spielHeadline").innerHTML="<h4>Block 4 (Doppel) - Spiel 1</h4>",document.getElementById("spiel").value="d1b4",i=getStoredNames(4,r);break;case 12:document.getElementById("spielHeadline").innerHTML="<h4>Block 4 (Doppel) - Spiel 2</h4>",document.getElementById("spiel").value="d2b4",i=getStoredNames(4,r)}document.getElementById("speichern").style.display="inherit",$("#ergSelection").css("visibility","visible"),$("#spielerHeim > #inputsForSingleHome").appendTo("#hiddenInputFieldContainer"),$("#spielerHeim > #inputsForDoubleHome").appendTo("#hiddenInputFieldContainer"),$("#spielerGast > #inputsForSingleGuest").appendTo("#hiddenInputFieldContainer"),$("#spielerGast > #inputsForDoubleGuest").appendTo("#hiddenInputFieldContainer");var l=document.getElementById("spiel").value;e?($("#hiddenInputFieldContainer > #inputsForSingleHome").appendTo("#spielerHeim"),$("#hiddenInputFieldContainer > #inputsForSingleGuest").appendTo("#spielerGast"),organizeSelectedOptionsForId(i,"name1",l,r),organizeSelectedOptionsForId(i,"name2",l,r)):($("#hiddenInputFieldContainer > #inputsForDoubleHome").appendTo("#spielerHeim"),$("#hiddenInputFieldContainer > #inputsForDoubleGuest").appendTo("#spielerGast"),organizeSelectedOptionsForId(i,"heimname1",l,r),organizeSelectedOptionsForId(i,"heimname2",l,r),switchSameSelectedOptionFor("heimname1","heimname2"),organizeSelectedOptionsForId(i,"gastname1",l,r),organizeSelectedOptionsForId(i,"gastname2",l,r),switchSameSelectedOptionFor("gastname1","gastname2")),$(".selectpicker").selectpicker("render"),$("#inputFormDialog").modal("show")}function switchSameSelectedOptionFor(e,a){var t=document.getElementById(e),n=document.getElementById(a);if(t.selectedIndex==n.selectedIndex)for(var r=n.options,i=0;i<r.length;i++)if(!r.item(i).selected&&"none"!==r.item(i).style.display){r.item(i).selected=!0;break}}function organizeSelectedOptionsForId(e,a,t,n){for(var r="e"===t.substring(0,1),i=document.getElementById(a).options,l=0;l<i.length;l++)i.item(l).hasAttribute("style")&&i.item(l).removeAttribute("style"),i.item(l).disabled===!0&&(i.item(l).disabled=!1);for(var l=0;l<i.length;l++)e[i.item(l).text]&&(r?i.item(l).text==n[t].spieler1.name||i.item(l).text==n[t].spieler2.name?i.item(l).style.display="inherit":(i.item(l).style.display="none",i.item(l).disabled=!0):i.item(l).text==n[t].paar1.spieler1.name||i.item(l).text==n[t].paar1.spieler2.name||i.item(l).text==n[t].paar2.spieler1.name||i.item(l).text==n[t].paar2.spieler2.name?i.item(l).style.display="inherit":(i.item(l).style.display="none",i.item(l).disabled=!0));var s={};if(r?(s[n[t].spieler1.name]={},s[n[t].spieler2.name]={},delete s[""]):(s[n[t].paar1.spieler1.name]={},s[n[t].paar1.spieler2.name]={},s[n[t].paar2.spieler1.name]={},s[n[t].paar2.spieler2.name]={},delete s[""]),0!=Object.keys(s).length){for(var l=0;l<i.length;l++)if(s[i.item(l).text]&&"none"!==i.item(l).style.display){i.item(l).selected=!0;break}}else for(var l=0;l<i.length;l++)if("none"!==i.item(l).style.display){i.item(l).selected=!0;break}}function getStoredNames(e,a){var t={};switch(e){case 1:t[a.e1b1.spieler1.name]={},t[a.e1b1.spieler2.name]={},t[a.e2b1.spieler1.name]={},t[a.e2b1.spieler2.name]={},t[a.e3b1.spieler1.name]={},t[a.e3b1.spieler2.name]={},t[a.e4b1.spieler1.name]={},t[a.e4b1.spieler2.name]={};break;case 2:t[a.d1b2.paar1.spieler1.name]={},t[a.d1b2.paar1.spieler2.name]={},t[a.d1b2.paar2.spieler1.name]={},t[a.d1b2.paar2.spieler2.name]={},t[a.d2b2.paar1.spieler1.name]={},t[a.d2b2.paar1.spieler2.name]={},t[a.d2b2.paar2.spieler1.name]={},t[a.d2b2.paar2.spieler2.name]={};break;case 3:t[a.e1b3.spieler1.name]={},t[a.e1b3.spieler2.name]={},t[a.e2b3.spieler1.name]={},t[a.e2b3.spieler2.name]={},t[a.e3b3.spieler1.name]={},t[a.e3b3.spieler2.name]={},t[a.e4b3.spieler1.name]={},t[a.e4b3.spieler2.name]={};break;case 4:t[a.d1b4.paar1.spieler1.name]={},t[a.d1b4.paar1.spieler2.name]={},t[a.d1b4.paar2.spieler1.name]={},t[a.d1b4.paar2.spieler2.name]={},t[a.d2b4.paar1.spieler1.name]={},t[a.d2b4.paar1.spieler2.name]={},t[a.d2b4.paar2.spieler1.name]={},t[a.d2b4.paar2.spieler2.name]={}}return t}function switchMore(e,a,t){a?(0==t?jQuery("#"+e).show():jQuery("#"+e).show(200),jQuery("#link"+e).text("Less -")):(0==t?jQuery("#"+e).hide():jQuery("#"+e).hide(200),jQuery("#link"+e).text("More +"))}function showNachmeldungen(){bShowNachmeldungen=document.getElementById("nachmeldungenCheckbox").checked,$("#nachmeldungenRowContent").appendTo(bShowNachmeldungen?"#nachmeldungenRow":"#hiddenInputFieldContainer"),document.getElementById("nachmeldungenRow").style.display=bShowNachmeldungen?"block":"none"}function validateTextarea(){var e=this,a=e.id.split("_")[1],t=new RegExp("^"+$(e).attr("pattern")+"$");""===this.value||this.value.match(t)?(jQuery("#"+e.id).removeClass("nachmeldungenError"),document.getElementById(a).style.display="none"):(jQuery("#"+e.id).addClass("nachmeldungenError"),document.getElementById(a).style.display="block")}function checkOnTeamSelection(){var e=document.getElementById("teamheim"),a=document.getElementById("teamgast");document.getElementById("gameOnButton").disabled=0!=e.selectedIndex&&0!=a.selectedIndex&&e.selectedIndex!=a.selectedIndex?!1:!0}function escapeAll(){ergebnisseFromFile=JSON.parse(window.localStorage.getItem("ergebnisseLeer")),window.localStorage.setItem("ergebnisse",JSON.stringify(ergebnisseFromFile)),ergebnisse=ergebnisseFromFile;var e=new Date;e.setFullYear(e.getFullYear()+1),document.cookie="emailHeim="+document.getElementById("emailHeim").value+"; expires="+e.toGMTString()+";",e=new Date,e.setHours(e.getHours()+24),document.cookie="emailGast="+document.getElementById("emailGast").value+"; expires="+e.toGMTString()+";";var a=document.getElementById("teamheim").selectedOptions[0].value,t=document.getElementById("teamgast").selectedOptions[0].value;$("#nachmeldungenRowContent").appendTo("#hiddenInputFieldContainer");var n={heim:[],gast:[]};n.heim.push(btoa(formatName(document.getElementById("nachmeldung_fh1").value.trim()))),n.heim.push(btoa(formatName(document.getElementById("nachmeldung_fh2").value.trim()))),n.heim.push(btoa(formatName(document.getElementById("nachmeldung_fh3").value.trim()))),n.heim.push(btoa(formatName(document.getElementById("nachmeldung_fh4").value.trim()))),n.gast.push(btoa(formatName(document.getElementById("nachmeldung_fg1").value.trim()))),n.gast.push(btoa(formatName(document.getElementById("nachmeldung_fg2").value.trim()))),n.gast.push(btoa(formatName(document.getElementById("nachmeldung_fg3").value.trim()))),n.gast.push(btoa(formatName(document.getElementById("nachmeldung_fg4").value.trim()))),window.localStorage.setItem("nachmeldungen",JSON.stringify(n)),document.getElementById("heimFeldInTable").innerHTML=atob(a),document.getElementById("gastFeldInTable").innerHTML=atob(t),ergebnisse.heim=a,ergebnisse.gast=t,setUpSelections(),window.localStorage.setItem("ergebnisse",JSON.stringify(ergebnisse)),emptyTable("summaryTable"),emptyTable("scoresTable"),printTable(ergebnisseFromFile),$("#myTabs li:eq(1) a").tab("show")}function formatName(e){return e&&""!=e?e+" (N)":""}function displayBusyIndicator(){$("#busyindicator").css("visibility","visible")}var heim=unescape(window.localStorage.getItem("heim")),gast=unescape(window.localStorage.getItem("gast")),spiel=window.localStorage.getItem("spiel"),nachmeldungen=JSON.parse(window.localStorage.getItem("nachmeldungen")),ergebnisse=void 0,vereine=null;$.getJSON("data/vereine.json",function(e){var a=[];vereine=e;for(var t in e)a.push(atob(t));a.sort();for(var n=0;n<a.length;n++)$("#teamheim").append($("<option/>",{value:btoa(a[n]),text:a[n]})),$("#teamgast").append($("<option/>",{value:btoa(a[n]),text:a[n]}));for(var r=document.cookie.split(";"),n=r.length-1;n>=0;n--)if(r[n]&&""!=r[n]&&-1!=r[n].indexOf("=")){var i=r[n].trim().split("=");0===i[0].indexOf("email")&&(document.getElementById(i[0].trim()).value=i[1].trim())}}),$.getJSON("data/ergebnisse.json",function(e){window.localStorage.setItem("ergebnisseLeer",JSON.stringify(e))}),switchMore("more1",!1,0),switchMore("more2",!1,0),switchMore("dmore1",!1,0),switchMore("dmore2",!1,0),switchMore("dmore3",!1,0),switchMore("dmore4",!1,0),$("#nachmeldung_fh1").keyup(validateTextarea),$("#nachmeldung_fh2").keyup(validateTextarea),$("#nachmeldung_fh3").keyup(validateTextarea),$("#nachmeldung_fh4").keyup(validateTextarea),$("#nachmeldung_fg1").keyup(validateTextarea),$("#nachmeldung_fg2").keyup(validateTextarea),$("#nachmeldung_fg3").keyup(validateTextarea),$("#nachmeldung_fg4").keyup(validateTextarea);var mySlider=new Slider("#ergSlider",{id:"ergSliderId",min:0,max:5,value:0,tooltip:"hide"});mySlider.on("slide",checkSelection);